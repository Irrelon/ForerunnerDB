$(function(){test("Bind - View.on() :: Insert from Collection",function(){dbUp();dataUp();viewUp();domUp();userView.bind("#testTarget",{template:function(a,b){b('<li id="'+a._id+'">'+a.name+"</li>")}});user.insert({_id:"2342",name:"hello"});var a=$("#testTarget").find("#2342");ok(1===a.length,"Insert single document");viewDown();domDown();dbDown()});test("Bind - View.on() :: Update from Collection",function(){dbUp();dataUp();viewUp();domUp();userView.bind("#testTarget",{template:function(a,b){b('<li id="'+
a._id+'">'+a.name+"</li>")}});user.insert({_id:"2342",name:"hello"});var a=$("#testTarget").find("#2342").text();ok("hello"===a,"Insert single document");user.update({_id:"2342"},{name:"hello2"});a=$("#testTarget").find("#2342").text();ok("hello2"===a,"Update single document");viewDown();domDown();dbDown()});test("Bind - View.on() :: Remove from Collection",function(){dbUp();dataUp();viewUp();domUp();userView.bind("#testTarget",{template:function(a,b){b('<li id="'+a._id+'">'+a.name+"</li>")}});user.insert({_id:"2342",
name:"hello"});var a=$("#testTarget").find("#2342");ok(1===a.length,"Insert single document");user.remove({_id:"2342"});a=$("#testTarget").find("#2342");ok(0===a.length,"Remove single document");viewDown();domDown();dbDown()});test("Bind - View.on() :: Insert from CollectionGroup via Collection Interface",function(){dbUp();dataUp();viewUp();viewGroupUp();domUp();user.on("insert",function(){ok(!0,"Collection insert")});userView.on("insert",function(){console.log("View insert");ok(!0,"View insert")});
userGroup.on("insert",function(){console.log("Group insert");ok(!0,"Group insert")});userGroupView.on("insert",function(){console.log("View from group insert");ok(!0,"View from group insert")});userGroupView.bind("#testTarget",{template:function(a,b){b('<li id="'+a._id+'">'+a.name+"</li>")}});user.insert({_id:"2342",name:"hello"});var a=$("#testTarget").find("#2342");ok(1===a.length,"Insert single document");domDown();viewGroupDown();viewDown();dbDown()});test("Bind - View.on() :: Update from CollectionGroup via Collection Interface",
function(){dbUp();dataUp();viewUp();viewGroupUp();domUp();user.on("update",function(){ok(!0,"Collection update")});userView.on("update",function(){console.log("View update");ok(!0,"View update")});userGroup.on("update",function(){console.log("Group update");ok(!0,"Group update")});userGroupView.on("update",function(){console.log("View from group update");ok(!0,"View from group update")});userGroupView.bind("#testTarget",{template:function(a,b){b('<li id="'+a._id+'">'+a.name+"</li>")}});user.insert({_id:"2342",
name:"hello"});var a=$("#testTarget").find("#2342").text();ok("hello"===a,"Insert single document");user.update({_id:"2342"},{name:"hello2"});a=$("#testTarget").find("#2342").text();ok("hello2"===a,"Update single document");viewGroupDown();viewDown();dbDown()});test("Bind - View.on() :: Remove from CollectionGroup via Collection Interface",function(){dbUp();dataUp();viewUp();viewGroupUp();domUp();user.on("remove",function(){ok(!0,"Collection remove")});userView.on("remove",function(){console.log("View remove");
ok(!0,"View remove")});userGroup.on("remove",function(){console.log("Group remove");ok(!0,"Group remove")});userGroupView.on("remove",function(){console.log("View from group remove");ok(!0,"View from group remove")});userGroupView.bind("#testTarget",{template:function(a,b){b('<li id="'+a._id+'">'+a.name+"</li>")}});user.insert({_id:"2342",name:"hello"});var a=$("#testTarget").find("#2342");ok(1===a.length,"Insert single document");user.remove({_id:"2342"});a=$("#testTarget").find("#2342");ok(0===
a.length,"Remove single document");domDown();viewGroupDown();viewDown();dbDown()});test("Bind - View.on() :: Insert from CollectionGroup via CollectionGroup Interface",function(){dbUp();dataUp();viewUp();viewGroupUp();domUp();user.on("insert",function(){ok(!0,"Collection insert")});userView.on("insert",function(){console.log("View insert");ok(!0,"View insert")});userGroup.on("insert",function(){console.log("Group insert");ok(!0,"Group insert")});userGroupView.on("insert",function(){console.log("View from group insert");
ok(!0,"View from group insert")});userGroupView.bind("#testTarget",{template:function(a,b){b('<li id="'+a._id+'">'+a.name+"</li>")}});userGroup.insert({_id:"2342",name:"hello"});var a=$("#testTarget").find("#2342");ok(1===a.length,"Insert single document");domDown();viewGroupDown();viewDown();dbDown()});test("Bind - View.on() :: Update from CollectionGroup via CollectionGroup Interface",function(){dbUp();dataUp();viewUp();viewGroupUp();domUp();user.on("update",function(){ok(!0,"Collection update")});
userView.on("update",function(){console.log("View update");ok(!0,"View update")});userGroup.on("update",function(){console.log("Group update");ok(!0,"Group update")});userGroupView.on("update",function(){console.log("View from group update");ok(!0,"View from group update")});userGroupView.bind("#testTarget",{template:function(a,b){b('<li id="'+a._id+'">'+a.name+"</li>")}});userGroup.insert({_id:"2342",name:"hello"});var a=$("#testTarget").find("#2342").text();ok("hello"===a,"Insert single document");
userGroup.update({_id:"2342"},{name:"hello2"});a=$("#testTarget").find("#2342").text();ok("hello2"===a,"Update single document");viewGroupDown();viewDown();dbDown()});test("Bind - View.on() :: Remove from CollectionGroup via CollectionGroup Interface",function(){dbUp();dataUp();viewUp();viewGroupUp();domUp();user.on("remove",function(){ok(!0,"Collection remove")});userView.on("remove",function(){console.log("View remove");ok(!0,"View remove")});userGroup.on("remove",function(){console.log("Group remove");
ok(!0,"Group remove")});userGroupView.on("remove",function(){console.log("View from group remove");ok(!0,"View from group remove")});userGroupView.bind("#testTarget",{template:function(a,b){b('<li id="'+a._id+'">'+a.name+"</li>")}});userGroup.insert({_id:"2342",name:"hello"});var a=$("#testTarget").find("#2342");ok(1===a.length,"Insert single document");userGroup.remove({_id:"2342"});a=$("#testTarget").find("#2342");ok(0===a.length,"Remove single document");domDown();viewGroupDown();viewDown();dbDown()})});
