(function(Ta){"object"===typeof exports&&"undefined"!==typeof module?module.exports=Ta():"function"===typeof define&&define.amd?define([],Ta):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).ForerunnerDB_AutoBind=Ta()})(function(){return function ca(S,G,l){function a(h,f){if(!G[h]){if(!S[h]){var B="function"==typeof require&&require;if(!f&&B)return B(h,!0);if(b)return b(h,!0);B=Error("Cannot find module '"+h+"'");throw B.code="MODULE_NOT_FOUND",
B;}B=G[h]={exports:{}};S[h][0].call(B.exports,function(b){var f=S[h][1][b];return a(f?f:b)},B,B.exports,ca,S,G,l)}return G[h].exports}for(var b="function"==typeof require&&require,h=0;h<l.length;h++)a(l[h]);return a}({1:[function(ca,S,G){ca=ca("../lib/AutoBind");S.exports=ca},{"../lib/AutoBind":2}],2:[function(ca,S,G){G=ForerunnerDB.shared;var l={};G.addModule("AutoBind",l);l.extendCollection=function(b){var a=b.prototype.init,f=b.prototype._dataReplace,B=b.prototype._dataInsertAtIndex,l=b.prototype._dataRemoveAtIndex,
t=b.prototype._updateProperty,K=b.prototype._updateIncrement,G=b.prototype._updateSpliceMove,ja=b.prototype._updateSplicePush,ha=b.prototype._updatePush,ca=b.prototype._updatePull,oa=b.prototype._updateMultiply,S=b.prototype._updateRename,da=b.prototype._updateUnset,ya=b.prototype._updatePop,Aa=b.prototype.drop;b.prototype.init=function(){this._linked=0;a.apply(this,arguments)};b.prototype.isLinked=function(){return Boolean(this._linked)};b.prototype.link=function(b,a,h){if(window.jQuery){this._links=
this._links||{};var f,B;a&&"object"===typeof a?a.template&&"string"===typeof a.template&&(f=this.objectId(a.template),B=a.template):f=a;if(!this._links[f]){if(jQuery(b).length){if(!jQuery.templates[f]){if(!B)if(B=jQuery(a),B.length)B=jQuery(B[0]).html();else throw'ForerunnerDB.AutoBind "'+this.name()+'": Unable to bind collection to target because template "'+a+'" does not exist';jQuery.views.templates(f,B)}h&&h.wrap?(a={},a[h.wrap]=this._data,this.debug()&&console.log('ForerunnerDB.AutoBind: Binding with data wrapper "'+
h.wrap+'" for collection "'+this.name()+'" to output target: '+b),jQuery.templates[f].link(b,a)):jQuery.templates[f].link(b,this._data);this._links[f]=b;this._linked++;this.debug()&&console.log('ForerunnerDB.AutoBind: Added binding collection "'+this.name()+'" to output target: '+b);return this}throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot bind collection to target selector "'+b+'" because it does not exist in the DOM!';}throw'ForerunnerDB.AutoBind "'+this.name()+'": Attempt to bind a duplicate link from collection to the target: '+
b+" with the template: "+f;}throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot data-bind without jQuery. Please add jQuery to your page!';};b.prototype.unlink=function(b,a){if(window.jQuery){this._links=this._links||{};var f;a&&"object"===typeof a?a.template&&"string"===typeof a.template&&(f=this.objectId(a.template)):f=a;if(this._links[f])return jQuery.templates[f].unlink(b),delete this._links[f],this._linked--,this.debug()&&console.log('ForerunnerDB.AutoBind: Removed binding collection "'+this.name()+
'" to output target: '+b),this;console.log('ForerunnerDB.AutoBind "'+this.name()+'": Cannot remove link from collection, one does not exist to the target: '+b+" with the template: "+a)}else throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot data-bind without jQuery. Please add jQuery to your page!';return this};b.prototype._dataReplace=function(b){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Replacing some data in document for collection "'+this.name()+'"'),jQuery.observable(this._data).refresh(b)):
f.apply(this,arguments)};b.prototype._dataInsertAtIndex=function(b,a){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Inserting some data for collection "'+this.name()+'"'),jQuery.observable(this._data).insert(b,a)):B.apply(this,arguments)};b.prototype._dataRemoveAtIndex=function(b){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Removing some data for collection "'+this.name()+'"'),jQuery.observable(this._data).remove(b)):l.apply(this,arguments)};b.prototype._updateProperty=
function(b,a,f){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Setting document property "'+a+'" for collection "'+this.name()+'"'),jQuery.observable(b).setProperty(a,f)):t.apply(this,arguments)};b.prototype._updateIncrement=function(b,a,f){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Incrementing document property "'+a+'" for collection "'+this.name()+'"'),jQuery.observable(b).setProperty(a,b[a]+f)):K.apply(this,arguments)};b.prototype._updateSpliceMove=function(b,
a,f){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Moving document array index from "'+a+'" to "'+f+'" for collection "'+this.name()+'"'),jQuery.observable(b).move(a,f)):G.apply(this,arguments)};b.prototype._updateSplicePush=function(b,a,f){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Pushing item into document sub-array for collection "'+this.name()+'"'),b.length>a?jQuery.observable(b).insert(a,f):jQuery.observable(b).insert(f)):ja.apply(this,arguments)};b.prototype._updatePush=
function(b,a){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Pushing item into document sub-array for collection "'+this.name()+'"'),jQuery.observable(b).insert(a)):ha.apply(this,arguments)};b.prototype._updatePull=function(b,a){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Pulling item from document sub-array for collection "'+this.name()+'"'),jQuery.observable(b).remove(a)):ca.apply(this,arguments)};b.prototype._updateMultiply=function(b,a,f){this._linked?(this.debug()&&
console.log('ForerunnerDB.AutoBind: Multiplying value for collection "'+this.name()+'"'),jQuery.observable(b).setProperty(a,b[a]*f)):oa.apply(this,arguments)};b.prototype._updateRename=function(b,a,f){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Renaming property "'+a+'" to "'+f+'" on document for collection "'+this.name()+'"'),jQuery.observable(b).setProperty(f,b[a]),jQuery.observable(b).removeProperty(a)):S.apply(this,arguments)};b.prototype._updateUnset=function(b,a){this._linked?
(this.debug()&&console.log('ForerunnerDB.AutoBind: Removing property "'+a+'" from document for collection "'+this.name()+'"'),jQuery.observable(b).removeProperty(a)):da.apply(this,arguments)};b.prototype._updatePop=function(b,a){var f,h=!1;this._linked?0<b.length&&(this.debug()&&console.log('ForerunnerDB.AutoBind: Popping item from sub-array in document for collection "'+this.name()+'"'),1===a?f=b.length-1:-1===a&&(f=0),-1<f&&(jQuery.observable(arr).remove(f),h=!0)):h=ya.apply(this,arguments);return h};
b.prototype.drop=function(){var b;if(this._linked)for(b in this._links)this._links.hasOwnProperty(b)&&this.unlink(this._links[b],b);return Aa.apply(this,arguments)}};l.extendView=function(b){var a=b.prototype.init;b.prototype.init=function(){this._linked=0;a.apply(this,arguments)};b.prototype.isLinked=function(){return this.data().isLinked()};b.prototype.link=function(b,a,h){var t=this.publicData();this.debug()&&console.log('ForerunnerDB.AutoBind: Setting up data binding on view "'+this.name()+'" in underlying (internal) view collection "'+
t.name()+'" for output target: '+b);t.link(b,a,h);return this};b.prototype.unlink=function(b,a){var h=this.publicData();this.debug()&&console.log('ForerunnerDB.AutoBind: Removing data binding on view "'+this.name()+'" in underlying (internal) view collection "'+h.name()+'" for output target: '+b);h.unlink(b,a);return this}};l.extendOverview=function(b){b.prototype.isLinked=function(){return this.data().isLinked()};b.prototype.link=function(b,a,h){this._data.link.apply(this._data,arguments);this._refresh()};
b.prototype.unlink=function(b,a){this._data.unlink.apply(this._data,arguments);this._refresh()}};l.extendDocument=function(b){b.prototype.isLinked=function(){return Boolean(this._linked)};b.prototype.link=function(b,a,h){if(window.jQuery){this._links=this._links||{};this._linked||(this._linked=0);var l,t;a&&"object"===typeof a?a.template&&"string"===typeof a.template&&(l=this.objectId(a.template),t=a.template):l=a;if(!this._links[l]){if(jQuery(b).length){if(!jQuery.templates[l]){if(!t)if(t=jQuery(a),
t.length)t=jQuery(t[0]).html();else throw'ForerunnerDB.AutoBind "'+this.name()+'": Unable to bind document to target because template does not exist: '+a;jQuery.views.templates(l,t)}h&&h.wrap?(a={},a[h.wrap]=this._data,jQuery.templates[l].link(b,a)):jQuery.templates[l].link(b,this._data);this._links[l]=b;this._linked++;this.debug()&&console.log('ForerunnerDB.AutoBind: Added binding document "'+this.name()+'" to target: '+b);return this}throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot bind document to target "'+
b+'" because it does not exist in the DOM!';}throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot create a duplicate link from document to the target: '+b+" with the template: "+l;}throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot data-bind without jQuery. Please add jQuery to your page!';};b.prototype.unlink=function(b,a){if(window.jQuery){this._links=this._links||{};var h;a&&"object"===typeof a?a.template&&"string"===typeof a.template&&(h=this.objectId(a.template)):h=a;if(this._links[h])return jQuery.templates[h].unlink(b),
delete this._links[h],this._linked--,this.debug()&&console.log('ForerunnerDB.AutoBind "'+this.name()+'": Removed binding document to target: '+b),this;console.log('ForerunnerDB.AutoBind "'+this.name()+'": Cannot remove link from document, one does not exist to the target: '+b+" with the template: "+a)}else throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot data-bind without jQuery. Please add jQuery to your page!';}};if("undefined"!==typeof jQuery)if(ca("../lib/vendor/jsviews"),"undefined"!==typeof jQuery.views){ca=
["Collection","View","Overview","Document"];var a,b=function(b,a){if(l["extend"+b])l["extend"+b](a)};for(a=0;a<ca.length;a++)G.moduleFinished(ca[a],b);G.finishModule("AutoBind")}else throw'ForerunnerDB.AutoBind "'+this.name()+'": Plugin cannot continue because jsViews is not loaded. Check your error log for url errors; it should have automatically loaded with this plugin.';else throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot data-bind without jQuery. Please add jQuery to your page!';G.finishModule("AutoBind");
S.exports=l},{"../lib/vendor/jsviews":3}],3:[function(ca,S,G){window.jQuery&&(this.jQuery=window.jQuery,function(){(function(l,a,b){function h(b,m){for(var a in m.props)V.test(a)&&(b[a]=m.props[a])}function G(b){return b}function f(b){debugger;return b}function B(b){Na=(Da._dbgMode=b)?"Unavailable (nested view): use #getIndex()":"";Ea("dbg",Oa.dbg=Ja.dbg=b?f:G)}function ca(b){this.name=(s.link?"JsViews":"JsRender")+" Error";this.message=b||this.name}function t(b,m){for(var a in m)b[a]=m[a];return b}
function K(b){return"function"===typeof b}function S(b,m,a){if(!ua.rTag||b)I=b?b.charAt(0):I,z=b?b.charAt(1):z,A=m?m.charAt(0):A,ea=m?m.charAt(1):ea,ga=a||ga,b="\\"+I+"(\\"+ga+")?\\"+z,m="\\"+A+"\\"+ea,y="(?:(?:(\\w+(?=[\\/\\s\\"+A+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+A+"]|\\"+A+"(?!\\"+ea+"))*?)",ua.rTag=y+")",y=RegExp(b+y+"(\\/)?|(?:\\/(\\w+)))"+m,"g"),u=RegExp("<.*>|([^\\\\]|^)[{}]|"+b+".*"+m);return[I,z,A,ea,ga]}function ja(ia,m){m||(m=ia,ia=b);var a,c,w,g;w=this;
a=!m||"root"===m;if(ia){if(g=w.type===m?w:b,!g)if(a=w.views,w._.useKey)for(c in a){if(g=a[c].get(ia,m))break}else for(c=0,w=a.length;!g&&c<w;c++)g=a[c].get(ia,m)}else if(a)for(;w.parent.parent;)g=w=w.parent;else for(;w&&!g;)g=w.type===m?w:b,w=w.parent;return g}function ha(){var ia=this.get("item");return ia?ia.index:b}function ma(){return this.index}function oa(ia){var m,a=this,c=a.linkCtx,w=(a.ctx||{})[ia];w===b&&c&&c.ctx&&(w=c.ctx[ia]);w===b&&(w=Oa[ia]);w&&K(w)&&!w._wrp&&(m=function(){return w.apply(this&&
this!==l?this:a,arguments)},m._wrp=!0,t(m,w));return m||w}function Qa(ia,m,a,c){var w,g,k=+a===a&&m.tmpl.bnds[a-1],e=m.linkCtx;a=(c=c!==b&&{props:{},args:[c]})||(k?k(m.data,m,N):a);g=a.args[0];if(ia||k)w=e&&e.tag,w||(w={_:{inline:!e,bnd:k},tagName:":",cvt:ia,flow:!0,tagCtx:a,_is:"tag"},e&&(e.tag=w,w.linkCtx=e,a.ctx=L(a.ctx,e.view.ctx)),ua._lnk(w)),w._er=c&&g,h(w,a),a.view=m,w.ctx=a.ctx||{},delete a.ctx,m._.tag=w,g=da(w,w.convert||"true"!==ia&&ia)[0],g=k&&m._.onRender?m._.onRender(g,m,k):g,m._.tag=
b;return g!=b?g:""}function da(b,m){var a=b.tagCtx,c=a.view,w=a.args;m=m&&(""+m===m?c.getRsc("converters",m)||Q("Unknown converter: '"+m+"'"):m);w=w.length||a.index?m?w.slice():w:[c.data];m&&(m.depends&&(b.depends=ua.getDeps(b.depends,b,m.depends,m)),w[0]=m.apply(b,w));return w}function ya(a,m){for(var c,g=this;c===b&&g;)c=(c=g.tmpl[a])&&c[m],g=g.parent;return c||N[a][m]}function Aa(a,m,c,g,w,e){var k,d,p,f,s,C,A,U,W,l="",u=m.linkCtx||0,z=m.ctx,y=c||m.tmpl,v=+g===g&&y.bnds[g-1];"tag"===a._is&&(k=
a,a=k.tagName,g=k.tagCtxs);k=k||u.tag;g=(e=e!==b&&(l+=e,[{props:{},args:[]}]))||(v?v(m.data,m,N):g);C=g.length;for(s=0;s<C;s++){s||c&&k||(U=m.getRsc("tags",a)||Q("Unknown tag: {{"+a+"}}"));d=g[s];if(!u.tag||k._er)c=d.tmpl,c=d.content=c&&y.tmpls[c-1],t(d,{tmpl:(k?k:U).template||c,render:ra,index:s,view:m,ctx:L(d.ctx,z)});if(c=d.props.tmpl)c=""+c===c?m.getRsc("templates",c)||P(c):c,d.tmpl=c;k||(U._ctr?(k=new U._ctr,W=!!k.init):ua._lnk(k={render:U.render}),k._={inline:!u},u&&(u.tag=k,k.linkCtx=u),(k._.bnd=
v||u.fn)?k._.arrVws={}:k.dataBoundOnly&&Q("{^{"+a+"}} tag must be data-bound"),k.tagName=a,k.parent=f=z&&z.tag,k._is="tag",k._def=U,k.tagCtxs=g);d.tag=k;k.dataMap&&k.tagCtxs&&(d.map=k.tagCtxs[s].map);k.flow||(A=d.ctx=d.ctx||{},d=k.parents=A.parentTags=z&&L(A.parentTags,z.parentTags)||{},f&&(d[f.tagName]=f),d[k.tagName]=A.tag=k)}m._.tag=k;if(!(k._er=e)){h(k,g[0]);k.rendering={};for(s=0;s<C;s++){d=k.tagCtx=k.tagCtxs[s];f=d.props;a=da(k,k.convert);if(g=f.dataMap||k.dataMap)if(a.length||f.dataMap){e=
d.map;if(!e||e.src!==a[0]||w)e&&e.src&&e.unmap(),e=d.map=g.map(a[0],f);a=[e.tgt]}k.ctx=d.ctx;!s&&W&&(g=k.template,k.init(d,u,k.ctx),W=b,k.template!==g&&(k._.tmpl=k.template),u&&(u.attr=k.attr=u.attr||k.attr));g=b;k.render&&(g=k.render.apply(k,a));a=a.length?a:[m];g=g!==b?g:d.render(a[0],!0)||(w?b:"");l=l?l+(g||""):g}delete k.rendering}k.tagCtx=k.tagCtxs[0];k.ctx=k.tagCtx.ctx;k._.inline&&(p=k.attr)&&p!==F&&(l="text"===p?Ja.html(l):"");return v&&m._.onRender?m._.onRender(l,m,v):l}function O(b,a,c,g,
w,e,k,d){var f="array"===a,p={key:0,useKey:f?0:1,id:""+H++,onRender:d,bnds:{}};this.data=g;this.tmpl=w;this.content=k;this.views=f?[]:{};this.parent=c;this.type=a||"top";this._=p;this.linked=!!d;c?(a=c.views,g=c._,g.useKey?(a[p.key="_"+g.useKey++]=this,this.index=Na,this.getIndex=ha,e=g.tag,p.bnd=f&&(!e||!!e._.bnd&&e)):a.splice(p.key=this.index=e,0,this),this.ctx=b||c.ctx):this.ctx=b}function fa(b){var a,c,g,w,e,k;for(a in Y)if(w=Y[a],(e=w.compile)&&(c=b[a+"s"]))for(g in c)(w=c[g]=e(g,c[g],b))&&(k=
ua.onStore[a])&&k(g,w,e)}function Ba(a,c,g){K(c)?c={depends:c.depends,render:c}:(c.baseTag&&(c.flow=!!c.flow,c=t(t({},c.baseTag),c)),(a=c.template)!==b&&(c.template=""+a===a?P[a]||P(a):a),!1!==c.init&&(a=c._ctr=function(){},(a.prototype=c).constructor=a));g&&(c._parentTmpl=g);return c}function Ca(c,m,g,e){function w(m){if(""+m===m||0<m.nodeType){try{k=0<m.nodeType?m:!u.test(m)&&a&&a(l.document).find(m)[0]}catch(w){}k&&(m=P[c=c||k.getAttribute($)],m||(c=c||"_"+ka++,k.setAttribute($,c),m=P[c]=Ca(c,
k.innerHTML,g,e)),k=b);return m}}var d,k;m=m||"";d=w(m);e=e||(m.markup?m:{});e.tmplName=c;g&&(e._parentTmpl=g);!d&&m.markup&&(d=w(m.markup))&&d.fn&&(d.debug!==m.debug||d.allowCode!==m.allowCode)&&(d=d.markup);if(d!==b)return c&&!g&&(Ra[c]=function(){return m.render.apply(m,arguments)}),d.fn||m.fn?d.fn&&(m=c&&c!==d.tmplName?L(e,d):d):(m=qa(d,e),La(d.replace(v,"\\$&"),m)),fa(e),m}function Ma(b){function a(c,m){this.tgt=b.getTgt(c,m)}K(b)&&(b={getTgt:b});b.baseMap&&(b=t(t({},b.baseMap),b));b.map=function(b,
c){return new a(b,c)};return b}function qa(b,a){var c,g=Da.wrapMap||{},e=t({markup:b,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:aa},a);a.htmlTag||(c=Pa.exec(b),e.htmlTag=c?c[1].toLowerCase():"");(c=g[e.htmlTag])&&c!==g.div&&(e.markup=s.trim(e.markup));return e}function va(a,c){function g(d,f,k){var p,s,h;if(d&&"object"===typeof d&&!d.nodeType&&!d.markup&&!d.getTgt){for(s in d)g(s,d[s],f);return N}f===b&&(f=d,d=b);d&&""+d!==d&&(k=f,f=d,d=b);h=k?k[e]=k[e]||{}:g;s=c.compile;null===f?d&&
delete h[d]:(f=s?f=s(d,f,k):f,d&&(h[d]=f));s&&f&&(f._is=a);f&&(p=ua.onStore[a])&&p(d,f,s);return f}var e=a+"s";N[e]=g;Y[a]=c}function na(b,a,c){var g=this.jquery&&(this[0]||Q('Unknown template: "'+this.selector+'"')),d=g.getAttribute($);return aa.call(d?P[d]:P(g),b,a,c)}function Ka(b,a,c){if(Da._dbgMode)try{return b.fn(a,c,N)}catch(g){return Q(g,c)}return b.fn(a,c,N)}function aa(b,a,c,g,d,e){return g||!this.fn._nvw||s.isArray(b)?ra.call(this,b,a,c,g,d,e):Ka(this,b,{tmpl:this})}function ra(a,c,g,d,
e,f){var k,p,h,u,C,l,A,U,W;h=this;var z="";!!c===c&&(g=c,c=b);!0===e&&(k=!0,e=0);h.tag?(l=h,h=h.tag,p=h._,C=h.tagName,U=p.tmpl||l.tmpl,W=h.attr&&h.attr!==F,c=L(c,h.ctx),A=l.content,!1===l.props.link&&(c=c||{},c.link=!1),d=d||l.view,a=arguments.length?a:d):U=h;if(U&&(!d&&a&&"view"===a._is&&(d=a),d&&(A=A||d.content,f=f||d._.onRender,a===d&&(a=d.data),c=L(c,d.ctx)),d&&"top"!==d.type||((c=c||{}).root=a),U.fn||(U=P[U]||P(U)),U)){l=f=!1!==(c&&c.link)&&!W&&f;!0===f&&(l=b,f=d._.onRender);c=U.helpers?L(U.helpers,
c):c;if(s.isArray(a)&&!g)for(u=k?d:e!==b&&d||new O(c,"array",d,a,U,e,A,f),k=0,p=a.length;k<p;k++)h=a[k],C=new O(c,"item",u,h,U,(e||0)+k,A,f),h=Ka(U,h,C),z+=u._.onRender?u._.onRender(h,C):h;else{if(d||!U.fn._nvw)u=k?d:new O(c,C||"data",d,a,U,e,A,f),p&&!h.flow&&(u.tag=h);z+=Ka(U,a,u)}return l?l(z,u):z}return""}function Q(b,a,c){c=Da.onError(b,a,c);if(""+b===b)throw new ua.Err(c);return!a.linkCtx&&a.linked?Ja.html(c):c}function la(b){Q("Syntax error\n"+b)}function La(b,a,g,f){function w(a){(a-=L)&&A.push(b.substr(L,
a).replace(M,"\\n"))}function h(a){a&&la('Unmatched or missing tag: "{{/'+a+'}}" in template:\n'+b)}var k,p,s,u=a&&a.allowCode,l=[],L=0,C=[],A=l,z=[,,l];g&&(b=I+b+ea);h(C[0]&&C[0][2].pop()[0]);b.replace(y,function(c,d,k,l,W,v,y,t,H,T,B,I){v&&(W=":",l=F);T=T||g;d=(d||g)&&[[]];var N="",r="",q="",n="",x="",sa="",wa="",Sa="";y=!T&&!W&&!y;k=k||(H=H||"#data",W);w(I);L=I+c.length;t?u&&A.push(["*","\n"+H.replace(D,"$1")+"\n"]):k?("else"===k&&(R.test(H)&&la('for "{{else if expr}}" use "{{else expr}}"'),d=
z[7],z[8]=b.substring(z[8],I),z=C.pop(),A=z[2],y=!0),H&&(e(H.replace(M," "),d,a).replace(za,function(b,a,c,g,d,e,m,k){m?(r+=e+",",n+="'"+k+"',"):c?(q+=g+e+",",sa+=g+"'"+k+"',"):a?wa+=e:("trigger"===d&&(Sa+=e),N+=g+e+",",x+=g+"'"+k+"',",s=s||V.test(d));return""}).slice(0,-1),d&&d[0]&&d.pop()),p=[k,l||!!f||s||"",y&&[],[n.slice(0,-1),x.slice(0,-1),sa.slice(0,-1)],[r.slice(0,-1),N.slice(0,-1),q.slice(0,-1)],wa,Sa,d||0],A.push(p),y&&(C.push(z),z=p,z[8]=L)):B&&(h(B!==z[0]&&"else"!==z[0]&&B),z[8]=b.substring(z[8],
I),z=C.pop());h(!z&&B);A=z[2]});w(b.length);(L=l[l.length-1])&&h(""+L!==L&&+L[8]===L[8]&&L[0]);g?(k=d(l,b,g),c(k,l[0][7])):k=d(l,a);k._nvw&&(k._nvw=!/[~#]/.test(b));return k}function c(b,a){b.deps=[];for(var c in a)"_jsvto"!==c&&a[c].length&&(b.deps=b.deps.concat(a[c]));b.paths=a}function g(b,a){return"\n\t"+(a?a+":{":"")+"args:["+b[0]+"]"+(b[1]||!a?",\n\tprops:{"+b[1]+"}":"")+(b[2]?",\n\tctx:{"+b[2]+"}":"")}function e(b,a,c){var g,d,e,k,f,h=a&&a[0],p=0,s=c?c.links:h&&(h.links=h.links||{}),l={},L=
{0:-1},C=0;return(b+(c?" ":"")).replace(/\)\^/g,").").replace(Ga,function(u,W,y,F,v,H,t,B,T,I,M,N,D,P,r,q,n,x,sa,wa){function Sa(r,q,b,n,c,x,sa,wa){return b&&(h&&("linkTo"===g&&(d=a._jsvto=a._jsvto||[],d.push(v)),g&&!e||h.push(v.slice(q.length))),"."!==b)?(r=(n?'view.hlp("'+n+'")':c?"view":"data")+(wa?(x?"."+x:n?"":c?"":"."+b)+(sa||""):(wa=n?"":c?x||"":b,"")),r+=wa?"."+wa:"",q+("view.data"===r.slice(0,9)?r.slice(5):r)):r}H=H||"";y=y||W||N;v=v||T;I=I||n||"";T=wa.length-1;if(!t||f||k)return!h||!q||
f||k||g&&!e&&!d||(q=L[C],T>sa-q&&(q=wa.slice(q,sa+1),q=z+":"+q+" onerror=''"+A,t=s[q],t||(s[q]=!0,s[q]=t=La(q,c||h,!0),t.paths.push({_jsvOb:t})),!0!==t&&(d||h).push({_jsvOb:t}))),f?(f=!D,f?u:'"'):k?(k=!P,k?u:'"'):(y?(C++,L[C]=sa++,y):"")+(x?C?"":(p=wa.slice(p,sa),g?(g=e=d=!1,"\b"):"\b,")+p+(p=sa+u.length,h&&a.push(h=[]),"\b"):B?(C&&la(b),h&&a.pop(),g=v,e=F,p=sa+u.length,F&&(h=a[g]=[]),v+":"):v?v.split("^").join(".").replace(ba,Sa)+(I?(l[++C]=!0,"."!==v.charAt(0)&&(L[C]=sa),I):H):H?H:r?(l[C--]=!1,
r)+(I?(l[++C]=!0,I):""):M?(l[C]||la(b),","):W?"":(f=D,k=P,'"'));la(b)})}function d(a,e,f){var h,p,s,k,l,L,C,u,z,A,W,v,y,t,H,I,T,B,N,D,P,Na,Y,O,ea,r,q=0,n="",x={},sa=a.length;""+e===e?(B=f?'data-link="'+e.replace(M," ").slice(1,-1)+'"':e,e=0):(B=e.tmplName||"unnamed",e.allowCode&&(x.allowCode=!0),e.debug&&(x.debug=!0),W=e.bnds,T=e.tmpls);for(h=0;h<sa;h++)if(p=a[h],""+p===p)n+='\n+"'+p+'"';else if(s=p[0],"*"===s)n+=";\n"+p[1]+"\nret=ret";else{k=p[1];P=p[2];l=g(p[3],"params")+"},"+g(y=p[4]);O=p[5];r=
p[6];H=p[8];(t="else"===s)||(q=0,W&&(v=p[7])&&(q=W.push(v)));(p=":"===s)?k&&(s=k===F?">":k+s):(P&&(N=qa(H,x),N.tmplName=B+"/"+s,d(P,N),T.push(N)),t||(D=s,Na=n,n=""),N=(N=a[h+1])&&"else"===N[0]);ea=O?";\ntry{\nret+=":"\n+";H=t="";if(p&&(v||r||k&&k!==F)){Y="return {"+l+"};";I='c("'+k+'",view,';Y=new Function("data,view,j,u"," // "+B+" "+q+" "+s+"\n"+Y);Y._er=O;t=I+q+",";H=")";Y._tag=s;if(f)return Y;c(Y,v);A=!0}n+=p?(f?(O?"\ntry{\n":"")+"return ":ea)+(A?(A=b,z=u=!0,I+(v?(W[q-1]=Y,q):"{"+l+"}")+")"):
">"===s?(C=!0,"h("+y[0]+")"):"((v="+y[0]+')!=null?v:"")'):(z=L=!0,"\n{view:view,tmpl:"+(P?T.length:"0")+","+l+"},");if(D&&!N){n="["+n.slice(0,-1)+"]";I='t("'+D+'",view,this,';if(f||v){n=new Function("data,view,j,u"," // "+B+" "+q+" "+D+"\nreturn "+n+";");n._er=O;n._tag=s;v&&c(W[q-1]=n,v);if(f)return n;t=I+q+",undefined,";H=")"}n=Na+ea+I+(q||n)+")";D=v=0}O&&(z=!0,n+=";\n}catch(e){ret"+(f?"urn ":"+=")+t+"j._err(e,view,"+O+")"+H+";}\n"+(f?"":"ret=ret"))}n="// "+B+"\nvar v"+(L?",t=j._tag":"")+(u?",c=j._cnvt":
"")+(C?",h=j.converters.html":"")+(f?";\n":',ret=""\n')+(x.debug?"debugger;":"")+n+(f?"\n":";\nreturn ret;");try{n=new Function("data,view,j,u",n)}catch(wa){la("Compiled template code:\n\n"+n+'\n: "'+wa.message+'"')}e&&(e.fn=n);z||(n._nvw=!0);return n}function L(b,a){return b&&b!==a?a?t(t({},a),b):b:a&&t({},a)}function W(b){return X[b]||(X[b]="&#"+b.charCodeAt(0)+";")}function C(b){var a,c,g=[];if("object"===typeof b)for(a in b)(c=b[a])&&c.toJSON&&!c.toJSON()||K(c)||g.push({key:a,prop:c});return g}
function p(b){return null!=b?Ya.test(b)&&(""+b).replace(Z,W)||b:""}if(!(a&&a.render||l.jsviews)){var s,T,y,u,Na,I="{",z="{",A="}",ea="}",ga="^",ba=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,Ga=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^|\s*$)|[)\]])([([]?))|(\s+)/g,M=/[ \t]*(\r\n|\n|\r)/g,
D=/\\(['"])/g,v=/['"\\]/g,za=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,R=/^if\s/,Pa=/<(\w+)[>\s]/,Ya=/[\x00`><\"'&]/,V=/^on[A-Z]|^convert(Back)?$/,Z=/[\x00`><"'&]/g,ka=0,H=0,X={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},F="html",$="data-jsv-tmpl",Ra={},Y={template:{compile:Ca},tag:{compile:Ba},helper:{},converter:{}},N={jsviews:"v1.0.0-beta",settings:function(b){t(Da,b);B(Da._dbgMode);Da.jsv&&Da.jsv()},sub:{View:O,Err:ca,tmplFn:La,
cvt:da,parse:e,extend:t,syntaxErr:la,onStore:{},_lnk:G,_ths:h},map:Ma,_cnvt:Qa,_tag:Aa,_err:Q};(ca.prototype=Error()).constructor=ca;ha.depends=function(){return[this.get("item"),"index"]};ma.depends=function(){return["index"]};O.prototype={get:ja,getIndex:ma,getRsc:ya,hlp:oa,_is:"view"};for(T in Y)va(T,Y[T]);var P=N.templates,Ja=N.converters,Oa=N.helpers,Ea=N.tags,ua=N.sub,Da=N.settings;a?(s=a,s.fn.render=na,s.observable&&(t(ua,s.views.sub),N.map=s.views.map)):(s=l.jsviews={},s.isArray=Array&&Array.isArray||
function(b){return"[object Array]"===Object.prototype.toString.call(b)});s.render=Ra;s.views=N;s.templates=P=N.templates;Da({debugMode:B,delimiters:S,onError:function(a,c,g){c&&(a=g===b?"{Error: "+a+"}":K(g)?g(a,c):g);return a==b?"":a},_dbgMode:!0});Ea({"else":function(){},"if":{render:function(b){return this.rendering.done||!b&&(arguments.length||!this.tagCtx.index)?"":(this.rendering.done=!0,this.selected=this.tagCtx.index,this.tagCtx.render(this.tagCtx.view,!0))},onUpdate:function(b,a,c){var g;
for(b=0;(g=this.tagCtxs[b])&&g.args.length;b++)if(g=g.args[0],a=!g!==!c[b].args[0],!this.convert&&g||a)return a;return!1},flow:!0},"for":{render:function(a){var c,g=this.tagCtx,d="",e=0;if(!this.rendering.done){if(c=!arguments.length)a=g.view.data;a!==b&&(d+=g.render(a,c),e+=s.isArray(a)?a.length:1);if(this.rendering.done=e)this.selected=g.index}return d},flow:!0},include:{flow:!0},"*":{render:G,flow:!0}});Ea("props",{baseTag:Ea["for"],dataMap:Ma(C)});Ja({html:p,attr:p,url:function(a){return a!=b?
encodeURI(""+a):null===a?a:""}});S()}})(this,this.jQuery);(function(l,a,b){function h(b){return O(b)?new f(b):new G(b)}function G(b){this._data=b;return this}function f(b){this._data=b;return this}function B(b,a){b=O(b)?b:[b];var e,d,f=a,h=f,l=b.length,p=[];for(e=0;e<l;e++)d=b[e],aa(d)?p=p.concat(B(d.call(a,a),a)):""+d!==d?(a=h=d,h!==f&&p.push(f=h)):(h!==f&&p.push(f=h),p.push(d));return p}function ca(b,a){var e,d;for(e in b){d=!0;break}d||delete na[a]}function t(a,g){if(!a.data||!a.data.off){var e,
d,f,h,l,p=g.oldValue,s=g.value,t=a.data,y=t.observeAll,u=!t.cb.noArray,B=t.paths;if(a.type===va)(t.cb.array||t.cb).call(t,a,g);else if(t.prop===g.path||"*"===t.prop)h=typeof p===Ba&&(B[0]||u&&O(p)),l=typeof s===Ba&&(B[0]||u&&O(s)),y?(e=y._path+"."+g.path,d=y.filter,f=[a.target].concat(y.parents()),h&&ja(u,y.ns,[p],B,t.cb,!0,d,[f],e),l&&ja(u,y.ns,[s],B,t.cb,b,d,[f],e)):(h&&ja(u,[p],B,t.cb,!0),l&&ja(u,[s],B,t.cb)),t.cb(a,g)}}function K(){function c(b,c,g,d){var e,f=la(F),h=O(F)?[F]:F;b=R?b+"."+R:b;
if(y||d)f&&a(h).off(b,t);else{if(A=f&&a._data(F))for(I=(A=(A=A&&A.events)&&A[g?va:qa])&&A.length;I--;)if((z=A[I].data)&&z.cb._cId===u._cId&&z.ns===R){if(g)return;("*"===c&&z.prop!==c||z.prop===p)&&a(F).off(b,t)}c=g?{}:{fullPath:s,paths:c?[c]:[],prop:p};c.ns=R;c.cb=u;v&&(c.observeAll={_path:v,path:function(){e=D.length;return v.replace(/[[.]/g,function(b){e--;return"["===b?"["+a.inArray(D[e-1],D[e]):"."})},parents:function(){return D},filter:da,ns:R});a(h).on(b,null,c,t);ba&&((na[u._cId]=ba)[a.data(F,
"obId")||a.data(F,"obId",ra++)]=F)}}function g(b,a){b._ob=ea(b,X);var c=X;return function(g,d){var f=b._ob,h=a.length;typeof f===Ba&&(e(f,!0),(h||V&&O(f))&&ja(V,[f],a,u,ea,!0));f=b._ob=ea(b,c);typeof f===Ba&&(e(f),(h||V&&O(f))&&ja(V,[f],a,u,ea,[c]));u(g,d)}}function e(a,g,d,e){if(V){var f=F,p=v;F=a;e&&(F=a[e],v+="."+e);da&&F&&(F=h._fltr(v,F,e?[a].concat(D):D,da));F&&(d||O(F))&&c(va+".observe"+(u?".obs"+(G=u._cId=u._cId||Q++):""),b,!0,g);F=f;v=p}}var d,f,l,C,p,s,T,y,u,G,I,z,A,ea,ga,ba,K,M,D,v,da,R,
fa,S,V=!1!=this,Z=!0,ka=Ka,H=Array.apply(0,arguments);d=H.pop();var X=H.shift(),F=M=X,$=H.length;X+""===X&&V&&(R=X,X=F=M=H.shift(),$--);if(aa(d))u=d;else if(d+""===d&&(v=d,D=H.pop(),da=H.pop(),d=H.pop(),$-=3),!0===d?y=d:d&&(X=d,Z=b),d=H[$-1],$&&d===b||aa(d))u=H.pop(),$--;$&&aa(H[$-1])&&(ea=u,u=H.pop(),$--);ka+=y?u?".obs"+u._cId:"":".obs"+(G=u._cId=u._cId||Q++);y||(ba=na[G]=na[G]||{});fa=R&&R.match(Ma)||[""];for(S=fa.length;S--;)for(R=fa[S],O(M)?e(M,y,!0):y&&0===$&&M&&c(ka,""),d=K=0;d<$;d++)if(s=H[d],
""!==s){F=M;if(""+s===s){C=s.split("^");C[1]&&(K=C[0].split(".").length,s=C.join("."),K=s.split(".").length-K);if(ea&&(ga=ea(s,M))){$+=ga.length-1;Aa.apply(H,[d--,1].concat(ga));continue}C=s.split(".")}else Z&&!aa(s)&&(s&&s._jsvOb&&(M=g(s,H.slice(d+1)),M.noArray=!V,M._cId=u._cId,ja(V,[X],H.slice(0,d),M,ea),M=b,s=s._ob),F=s),M=s,C=[M];for(;F&&(p=C.shift())!==b;)if(typeof F===Ba){if(""+p===p){if(""===p)continue;if(C.length<K+1&&!F.nodeType){if(!y&&(A=la(F)&&a._data(F))){I=(A=(A=A.events)&&A[qa])&&A.length;
for(l=0;I--;)!(z=A[I].data)||z.cb!==u||z.ns!==R||z.prop!==p&&"*"!==z.prop||((f=C.join("."))&&z.paths.push(f),l++);if(l){F=F[p];continue}}if("*"===p){!y&&A&&A.length&&c(ka,"",!1,!0);aa(F)?(T=F.depends)&&ja(V,[T],u,y||X):c(ka,"");for(f in F)e(F,y,b,f);break}else p&&c(ka+"."+p,C.join("^"))}v&&(v+="."+p);p=F[p]}if(aa(p)){(T=p.depends)&&ja(V,[F],B(T,F),u,ea,y||[X]);break}F=p}e(F,y)}G&&ca(ba,G);return{cbId:G,bnd:ba}}function S(){[].push.call(arguments,!0);return K.apply(this,arguments)}function ja(){var b=
[].concat.apply([],arguments);return K.apply(b.shift(),b)}function ha(b,a,e,d){b+""!==b&&(e=a,a=b,b="");oa(b,this._data,a,e,[],"root",d)}function ma(b,a,e){ha.call(this,b,a,e,!0)}function oa(a,g,e,d,f,l,C){function p(b,a){y=b.length;I=[[b]].concat(I);for(B=l+"[]";y--;)s(b,y,a,1)}function s(g,f,p,l){var s;f!==fa&&(s=h._fltr(B,g[f],I,d))&&oa(a,s,e,d||(l?b:0),I.slice(),B,p)}function t(b,a){var c=f;l=b.data.observeAll._path;I=[b.target].concat(f);switch(a.change){case "insert":p(a.items);break;case "remove":p(a.items,
!0);break;case "refresh":p(a.oldItems,!0);p(b.target);break;case "set":B=l+"."+a.path,s(a,"oldValue",!0),s(a,"value")}e.apply(this,arguments);f=c}var y,u,B,I;if(typeof g===Ba){u=O(g)?"":"*";if(e){if(u||0!==d)t._cId=e._cId=e._cId||Q++,K(a,g,u,t,C,d,f,l)}else K(a,g,u,b,C,d,f,l);if(u)for(y in I=[g].concat(f),g)B=l+"."+y,s(g,y,C);else p(g,C)}}function Qa(b){return 0>b.indexOf(".")&&0>b.indexOf("[")}if(!a)throw"jsViews/jsObservable require jQuery";if(!a.observable){l=a.views=a.views||{jsviews:"v1.0.0-alpha",
sub:{}};var da=l.sub,ya=a.event.special,Aa=[].splice,O=a.isArray,fa=a.expando,Ba="object",Ca=parseInt,Ma=/\S+/g,qa=da.propChng=da.propChng||"propertyChange",va=da.arrChng=da.arrChng||"arrayChange",na=da._cbBnds=da._cbBnds||{},Ka=qa+".observe",aa=a.isFunction,ra=1,Q=1,la=a.hasData,La={};da.getDeps=function(){var b=arguments;return function(){for(var a,e,d=[],f=b.length;f--;)a=b[f--],(e=b[f])&&(d=d.concat(aa(e)?e(a,a):e));return d}};a.observable=h;h._fltr=function(b,a,e,d){if(d&&aa(d)?d(b,a,e):1)return a=
aa(a)?a.set&&a.call(e[0]):a,typeof a===Ba&&a};h.Object=G;h.Array=f;a.observe=h.observe=K;a.unobserve=h.unobserve=S;h._apply=ja;G.prototype={_data:null,observeAll:ha,unobserveAll:ma,data:function(){return this._data},setProperty:function(a,g,e){var d,f=this._data;a=a||"";if(f)if(O(a))for(d=a.length;d--;)g=a[d],this.setProperty(g.name,g.value,e===b||e);else if(""+a!==a)for(d in a)this.setProperty(d,a[d],g);else if(a!==fa){for(a=a.split(".");f&&1<a.length;)f=f[a.shift()];f&&this._setProperty(f,a[0],
g,e)}return this},removeProperty:function(a){this.setProperty(a,La);return this},_setProperty:function(a,g,e,d){var f,h,l,p=g?a[g]:a;aa(p)&&p.set&&(h=p,f=!0===p.set?p:p.set,p=p.call(a));if(p!==e||d&&p!=e)if(!(p instanceof Date)||p>e||p<e)f?(f.call(a,e),e=h.call(a)):(l=e===La)?(delete a[g],e=b):g&&(a[g]=e),this._trigger(a,{change:"set",path:g,value:e,oldValue:p,remove:l})},_trigger:function(b,g){a(b).triggerHandler(qa,g)}};f.prototype={_data:null,observeAll:ha,unobserveAll:ma,data:function(){return this._data},
insert:function(a,b){var e=this._data;1===arguments.length&&(b=a,a=e.length);a=Ca(a);-1<a&&a<=e.length&&(b=O(b)?b:[b],b.length&&this._insert(a,b));return this},_insert:function(a,b){var e=this._data,d=e.length;Aa.apply(e,[a,0].concat(b));this._trigger({change:"insert",index:a,items:b},d)},remove:function(a,g){var e;e=this._data;a===b&&(a=e.length-1);a=Ca(a);g=g?Ca(g):0===g?0:1;-1<g&&-1<a&&(e=e.slice(a,a+g),(g=e.length)&&this._remove(a,g,e));return this},_remove:function(a,b,e){var d=this._data,f=
d.length;d.splice(a,b);this._trigger({change:"remove",index:a,items:e},f)},move:function(a,b,e){e=e?Ca(e):0===e?0:1;a=Ca(a);b=Ca(b);if(0<e&&-1<a&&-1<b&&a!==b){var d=this._data.slice(a,a+e);(e=d.length)&&this._move(a,b,e,d)}return this},_move:function(a,b,e,d){var f=this._data,h=f.length;f.splice(a,e);f.splice.apply(f,[b,0].concat(d));this._trigger({change:"move",oldIndex:a,index:b,items:d},h)},refresh:function(a){var b=this._data.slice();this._refresh(b,a);return this},_refresh:function(a,b){var e=
this._data,d=e.length;Aa.apply(e,[0,e.length].concat(b));this._trigger({change:"refresh",oldItems:a},d)},_trigger:function(b,g){var e=this._data,d=e.length,e=a([e]);e.triggerHandler(va,b);d!==g&&e.triggerHandler(qa,{change:"set",path:"length",value:d,oldValue:g})}};ya[qa]=ya[va]={remove:function(b){var g,e,d,f,h=b.data;if(h&&(h.off=!0,h=h.cb)&&(g=na[h._cId])){b=a._data(this).events[b.type];for(d=b.length;d--&&!e;)e=(f=b[d].data)&&f.cb===h;e||(delete g[a.data(this,"obId")],ca(g,h._cId))}}};l.map=function(c){function g(a,
d,g){var f,l=this;this.src&&this.unmap();"object"===typeof a&&(l.src=a,l.tgt=g||l.tgt||[],l.options=d||l.options,l.update(),c.obsSrc&&h(l.src).observeAll(l.obs=function(a,d){f||(f=!0,c.obsSrc(l,a,d),f=b)},l.srcFlt),c.obsTgt&&h(l.tgt).observeAll(l.obt=function(a,d){f||(f=!0,c.obsTgt(l,a,d),f=b)},l.tgtFlt))}aa(c)&&(c={getTgt:c});c.baseMap&&(c=a.extend({},c.baseMap,c));c.map=function(a,b,c){return new g(a,b,c)};(g.prototype={srcFlt:c.srcFlt||Qa,tgtFlt:c.tgtFlt||Qa,update:function(a){h(this.tgt).refresh(c.getTgt(this.src,
this.options=a||this.options))},unmap:function(){this.src&&(this.obs&&h(this.src).unobserveAll(this.obs,this.srcFlt),this.obt&&h(this.tgt).unobserveAll(this.obt,this.tgtFlt),this.src=b)},map:g,_def:c}).constructor=g;return c}}})(this,this.jQuery);(function(l,a,b){function h(r,q,n){var x,d,c,g,e,f,h,k,l,p=r.target,m=p._jsvBnd,s=/&(\d+)\+?/g;if(m)for(;c=s.exec(m);)if(c=Fa[c[1]])if(q=c.to){c=c.linkCtx;h=c.view;l=c.tag;f=a(p);e=h.hlp(Ra);k=h.hlp(Y);d=K(p);x=w[d];n===b&&(n=Pa(d)?d(p):x?f[x]():f.attr(d));
x=q[1];q=q[0];x&&(g=Pa(x)?x:h.getRsc("converters",x));g&&(n=g.call(l,n));x=h.linkCtx;h.linkCtx=c;d={change:"change",oldValue:c._val,value:n};if(!(e&&!1===e.call(c,r,d)||l&&l.onBeforeChange&&!1===l.onBeforeChange(r,d)||n===b)&&(e=q[0],n!==b&&e)){e=e._jsvOb?e._ob:e;l&&(l._.chging=!0);Z(e).setProperty(q[2]||q[1],n);k&&k.call(c,r,d);if(l){if(l.onAfterChange)l.onAfterChange(r,d);delete l._.chging}c._val=n}h.linkCtx=x}}function G(r,q,n){var x,c,d,e,g,f=this.tag,h=this.data,k=this.elem;d=this.convert;var f=
k.parentNode,l=this.view,p=l.linkCtx,m=l.hlp(Ra);l.linkCtx=this;if(f&&!(m&&q&&!1===m.call(this,r,q)||q&&"*"!==r.data.prop&&r.data.prop!==q.path)){q&&(this.eventArgs=q);if(q||this._initVal){delete this._initVal;if(n._er)try{c=n(h,l)}catch(s){e=n._er,g=I(s,l,(new Function("data,view","return "+e+";"))(h,l)),c=[{props:{},args:[g]}]}else c=n(h,l,D);a:{var u=c,t=f=this.tag;x=this.attr||K(k,!0,d!==b);var v,z,y=t&&t.parentElem||this.elem;if(u!==b){z=a(y);x=t&&t.attr||x;Pa(u)&&I(this.expr+": missing parens");
if(t=/^css-/.test(x)&&x.slice(4))v=a.style(y,t),+u===u&&(v=parseInt(v));else if("link"!==x){if("value"===x)y.type===Ja&&(v=z.prop(x=P));else if(x===Oa)if(y.value===""+u)v=z.prop(P);else break a;v===b&&(v=(v=w[x])?z[v]():z.attr(x))}this._val=v}}if(f){d=e||f._er;c=c[0]?c:[c];n=!d&&q&&f.onUpdate&&!1===f.onUpdate(r,q,c);Ka(f,c,d);if(n||x===Ea){x===pa&&f.onBeforeLink&&f.onBeforeLink();Ma(f,f.tagCtx);ha(this,h,k);l.linkCtx=p;return}if(f._.chging)return;c=":"===f.tagName?D._cnvt(f.cvt,l,c[0]):D._tag(f,l,
l.tmpl,c,!0,g)}else n._tag&&(c=(d=""===d?ua:d)?D._cnvt(d,l,c[0]||c):D._tag(n._tag,l,l.tmpl,c,!0,g),f=this.tag,x=this.attr||x);B(c,this,x,f)&&q&&(m=l.hlp(Y))&&m.call(this,r,q);f&&(f._er=e,Ma(f,f.tagCtx))}ha(this,h,k);l.linkCtx=p}}function f(a,b){a._df=b;a[(b?"set":"remove")+"Attribute"](m,"")}function B(r,q,n,x){var c,d,h,k,p,m,s=r!==b,u=q.data,t=x&&x.parentElem||q.elem,v=a(t),E=q.view;m=q._val;var z=E.linkCtx,y=x||n===pa;x&&(x.parentElem=x.parentElem||q.expr||x._elCnt?t:t.parentNode,d=x._prv,h=x._nxt);
if(s){"visible"===n&&(n="css-display");if(/^css-/.test(n))"visible"===q.attr&&(q=(t.currentStyle||eb.call(l,t,"")).display,r?(r=t._jsvd||q,r!==Ea||(r=ab[c=t.nodeName])||(q=M.createElement(c),M.body.appendChild(q),r=ab[c]=(q.currentStyle||eb.call(l,q,"")).display,M.body.removeChild(q))):(t._jsvd=q,r=Ea)),(y=y||m!==r)&&a.style(t,n.slice(4),r);else if("link"!==n){if(n===P)p=!0,r=r&&"false"!==r;else if(n===Oa)if(t.value===""+r)r=p=!0,n=P;else{ha(q,u,t);return}else if("selected"===n||"disabled"===n||"multiple"===
n||"readonly"===n)r=r&&"false"!==r?n:null;if(c=w[n])if(n===pa){E.linkCtx=q;if(x&&x._.inline){n=x.nodes(!0);if(x._elCnt){if(d&&d!==h)g(d,h,t,x._tgId,"^",!0);else if(k=t._df)m=x._tgId+"^",c=k.indexOf("#"+m)+1,p=k.indexOf("/"+m),c&&0<p&&(c+=m.length,p>c&&(f(t,k.slice(0,c)+k.slice(p)),e(k.slice(c,p))));d=d?d.previousSibling:h?h.previousSibling:t.lastChild}a(n).remove();if(x&&x.onBeforeLink)x.onBeforeLink();k=E.link(E.data,t,d,h,r,x&&{tag:x._tgId,lazyLink:x.tagCtx.props.lazyLink})}else{s&&v.empty();if(x&&
x.onBeforeLink)x.onBeforeLink();s&&(k=E.link(u,t,d,h,r,x&&{tag:x._tgId}))}E.linkCtx=z}else{if(y=y||m!==r)if("text"===n&&t.children&&!t.children[0])t.textContent!==b?t.textContent=r:t.innerText=null===r?"":r;else v[c](r)}else if(y=y||m!==r)v[p?"prop":"attr"](n,r!==b||p?r:null);q._val=r}return k||y}if(n===pa&&x&&x.onBeforeLink)x.onBeforeLink()}function ca(a,b){var n=this.hlp(Ra),x=this.hlp(Y);if(!n||!1!==n.call(this,a,b)){if(b){var n=b.index,c=b.items;switch(b.change){case "insert":this.addViews(n,
c);break;case "remove":this.removeViews(n,c.length);break;case "move":this.refresh();break;case "refresh":this.refresh()}}x&&x.call(this,a,b)}}function t(r){var q,n=r.type,x=r.data,c=r._.bnd;if(!r._.useKey&&c){if(q=r._.bndArr)a([q[1]]).off(F,q[0]),r._.bndArr=b;c!==!!c&&c._.inline?n?c._.arrVws[r._.id]=r:delete c._.arrVws[r._.id]:n&&x&&(q=function(a){a.data&&a.data.off||ca.apply(r,arguments)},a([x]).on(F,q),r._.bndArr=[q,x])}}function K(a,b,n){var c=a.nodeName.toLowerCase(),d=za.merge[c]||a.contentEditable===
ua&&{to:pa,from:pa};return d?b?"input"===c&&a.type===Oa?Oa:d.to:d.from:b?n?"text":pa:""}function S(r,q,n,c,d,f,e){var h,k,l,p=r.parentElem,m=r._prv,s=r._nxt,t=r._elCnt;m&&m.parentNode!==p&&I("Missing parentNode");if(e)for(l in k=r.nodes(),t&&m&&m!==s&&g(m,s,p,r._.id,"_",!0),r.removeViews(b,b,!0),c=s,t&&(m=m?m.previousSibling:s?s.previousSibling:p.lastChild),a(k).remove(),r._.bnds)ra(l);else{if(q){h=c[q-1];if(!h)return!1;m=h._nxt}t?m=(c=m)?c.previousSibling:p.lastChild:c=m.nextSibling}q=n.render(d,
f,r._.useKey&&e,r,e||q,!0);r.link(d,p,m,c,q,h)}function ja(a,q,n){var c;n?(c="^`",q=q._.tag,n=q._tgId,n||(Fa[n=bb++]=q,q._tgId=""+n)):(c="_`",Ga[n=q._.id]=q);return"#"+n+c+(a!=b?a:"")+"/"+n+c}function ha(a,q,n){var c,d=a.tag,f=a.convertBack,e=[],g=a._bndId||""+bb++,h=a._hdlr;delete a._bndId;d&&(e=d.depends||e,e=Pa(e)?d.depends(d):e,c=d.linkedElem);if(!a._depends||""+a._depends!==""+e)if(a._depends&&Z._apply(!1,[q],a._depends,h,!0),q=Z._apply(!1,[q],a.fn.deps,e,h,a._ctxCb),q.elem=n,q.linkCtx=a,q._tgId=
g,n._jsvBnd=n._jsvBnd||"",n._jsvBnd+="&"+g,a._depends=e,a.view._.bnds[g]=g,Fa[g]=q,c&&(q.to=[[],f]),(c||f!==b)&&na(q,d&&d.convertBack||f),d){if(d.onAfterBind)d.onAfterBind(q);d.flow||d._.inline||(n.setAttribute(H,(n.getAttribute(H)||"")+"#"+g+"^/"+g+"^"),d._tgId=""+g)}if(c&&c[0])for(d._.radio&&(c=c.children("input[type=radio]")),a=c.length;a--;)c[a]._jsvBnd=c[a]._jsvBnd||n._jsvBnd+"+",c[a]._jsvLkEl=d}function ma(a,b,n,c,d,f,e){return oa(this,a,b,n,c,d,f,e)}function oa(r,q,n,c,d,e,g,k){if(r&&q){q=
q.jquery?q:a(q);C||(C=M.body,a(C).on($,h).on("blur","[contenteditable]",h));for(var l,m,s,t,u,v,E,z,y=ja,w=c&&"replace"===c.target,B=q.length;B--;)if(E=q[B],""+r===r)da(r,E,p(E),b,!0,n,c);else{e=e||p(E);if(r.markup!==b)!1===e.link&&(c=c||{},c.link=y=!1),w&&(v=E.parentNode),s=r.render(n,c,d,e,b,y),v?(g=E.previousSibling,k=E.nextSibling,a.cleanData([E],!0),v.removeChild(E),E=v):(g=k=b,a(E).empty());else if(!0===r&&e===ba)z={lnk:1};else break;if(E._df&&!k){t=fa(E._df,!0,cb);l=0;for(m=t.length;l<m;l++)u=
t[l],(u=Ga[u.id])&&u.data!==b&&u.parent.removeViews(u._.key,b,!0);f(E)}e.link(n,E,g,k,s,z,c)}}return q}function Qa(r,q,n,c,d,e,g,h){function k(a,r,q,c,n,e,f,g,x,h,l,m,p){var s,t="";if(p)return v=0,a;E=g||x||"";c=c||h;q=q||m;ka&&!q&&(c||E||e)&&(ka=b,Q=ma.shift());if(c=c||q)v=0,ka=b,aa&&(q||m?Xa[Q]||/;svg;|;math;/.test(";"+ma.join(";")+";")||(s="'<"+Q+".../"):Xa[c]?s="'</"+c:ma.length&&c===Q||(s="Mismatch: '</"+c),s&&Va(s+">' in:\n"+d)),pa=xa,Q=ma.shift(),xa=Wa[Q],h=h?"</"+h+">":"",pa&&(ta+=Ha,Ha="",
xa?ta+="-":(t=h+ia+"@"+ta+Da+(l||""),ta=Ja.shift()));xa?(e?Ha+=e:r=h||m||"",E&&(r+=E,Ha&&(r+=" "+H+'="'+Ha+'"',Ha=""))):r=e?r+t+n+ia+e+Da+f+E:t||a;v&&e&&Va(" No {^{ tags within elem markup ("+v+' ). Use data-link="..."');E&&(v=E,ma.unshift(Q),Q=E.slice(1),ma[0]&&ma[0]===jb[Q]&&I("Parent of <tr> must be <tbody>"),ka=Xa[Q],(xa=Wa[Q])&&!pa&&(Ja.unshift(ta),ta=""),pa=xa,ta&&xa&&(ta+="+"));return r}function l(a,r){var c,n,d,e,g=[];if(a){"@"===a._tkns.charAt(0)&&(r=J.previousSibling,J.parentNode.removeChild(J),
J=b);for(C=a.length;C--;){G=a[C];d=G.ch;if(c=G.path)for(A=c.length-1;n=c.charAt(A--);)"+"===n?"-"===c.charAt(A)?(A--,r=r.previousSibling):r=r.parentNode:r=r.lastChild;if("^"===d){if(E=Fa[c=G.id]){n=r&&(!J||J.parentNode!==r);if(!J||n)E.parentElem=r;G.elCnt&&n&&f(r,(G.open?"#":"/")+c+d+(r._df||""));g.push([n?null:J,G])}}else if(D=Ga[c=G.id])(D.parentElem||(D.parentElem=r||J&&J.parentNode||q,D._.onRender=ja,D._.onArrayChange=ca,t(D)),n=D.parentElem,G.open)?(D._elCnt=G.elCnt,r&&!J?f(r,"#"+c+d+(r._df||
"")):(D._prv||f(n,Aa(n._df,"#"+c+d)),D._prv=J)):(!r||J&&J.parentNode===r?J&&(D._nxt||f(n,Aa(n._df,"/"+c+d)),D._nxt=J):(f(r,"/"+c+d+(r._df||"")),D._nxt=b),y=D.linkCtx,(e=D.ctx&&D.ctx.onAfterCreate||La)&&e.call(y,D))}for(C=g.length;C--;)ra.push(g[C])}return!a||a.elCnt}function s(a){var b,r;if(a)for(C=a.length,A=0;A<C;A++)if(G=a[A],r=E=Fa[G.id].linkCtx.tag,!E.flow){if(!V){for(b=1;r=r.parent;)b++;ba=ba||b}!V&&b!==ba||Z&&E.tagName!==Z||W.push(E)}}function u(){var e,f,h="";f={};e=ea+(Ia?",["+m+"]":"");
F=U?q.querySelectorAll(e):a(e,q).get();B=F.length;n&&n.innerHTML&&(P=U?n.querySelectorAll(e):a(e,n).get(),n=P.length?P[P.length-1]:n);for(w=ba=0;w<B;w++)if(J=F[w],n&&!va)va=J===n;else if(c&&J===c){Ia&&(h+=O(J));break}else if(J.parentNode)if(Ia){h+=O(J);if(J._df){for(e=w+1;e<B&&J.contains(F[e]);)e++;f[e-1]=J._df}f[w]&&(h+=f[w]||"")}else ya&&(G=fa(J,b,db))&&(G=G[0])&&(oa=oa?G.id!==oa&&oa:G.open&&G.id),!oa&&Ka(fa(J))&&J.getAttribute(z)&&ra.push([J]);if(Ia){h+=q._df||"";if(f=h.indexOf("#"+Ia.id)+1)h=
h.slice(f+Ia.id.length);f=h.indexOf("/"+Ia.id);f+1&&(h=h.slice(0,f));s(fa(h,b,nb))}d===b&&q.getAttribute(z)&&ra.push([q]);Ba(n,xa);Ba(c,xa);if(!Ia){if(xa&&ta+Ha&&(J=c,ta&&(c?l(fa(ta+"+",!0),c):l(fa(ta,!0),q)),l(fa(Ha,!0),q),c)){h=c.getAttribute(H);if(B=h.indexOf(qa)+1)h=h.slice(B+qa.length-1);c.setAttribute(H,Ha+h)}B=ra.length;for(w=0;w<B;w++)if(J=ra[w],L=J[1],J=J[0],L){if(E=Fa[L.id]){if(y=E.linkCtx)E=y.tag,E.linkCtx=y;L.open?(J&&(E.parentElem=J.parentNode,E._prv=J),E._elCnt=L.elCnt,!E||E.onBeforeLink&&
!1===E.onBeforeLink()||E._.bound||(E._.bound=!0,D=E.tagCtx.view,da(b,E._prv,D,L.id)),E._.linking=!0):(E._nxt=J,E._.linking&&($=E.tagCtx,D=$.view,delete E._.linking,E._.bound||(E._.bound=!0,da(b,E._prv,D,L.id)),Ma(E,$)))}}else da(J.getAttribute(z),J,p(J),b,ya,r,g)}na&&na.resolve()}var v,y,E,w,B,A,C,F,J,D,G,L,P,K,T,S,R,W,V,Z,$,aa,ba,Y,X,Q,ka,la,ha,xa,pa,Ha,qa,va,oa,na,ya,Ia,Ea=this._.id+"_",ta="",ra=[],ma=[],Ja=[],La=this.hlp(N),Ka=l;if(e){na=e.lazyLink&&a.Deferred();if(e.tmpl)T="/"+e._.id+"_";else if(ya=
e.lnk,e.tag&&(Ea=e.tag+"^",e=!0),Ia=e.get)Ka=s,W=Ia.tags,V=Ia.deep,Z=Ia.name;e=!0===e}q=q?""+q===q?a(q)[0]:q.jquery?q[0]:q:this.parentElem||M.body;aa=!za.noValidate&&q.contentEditable!==ua;Q=q.tagName.toLowerCase();xa=!!Wa[Q];n=n&&Ca(n,xa);c=c&&Ca(c,xa)||null;if(d!=b){la=Y=M.createElement("div");qa=Ha="";X="http://www.w3.org/2000/svg"===q.namespaceURI?"svg_ns":(K=hb.exec(d))&&K[1]||"";Na&&K&&K[2]&&I("Unsupported: "+K[2]);if(xa){for(R=c;R&&!(S=fa(R));)R=R.nextSibling;if(ha=S?S._tkns:q._df){K=T||"";
if(e||!T)K+="#"+Ea;A=ha.indexOf(K);A+1&&(A+=K.length,qa=Ha=ha.slice(0,A),ha=ha.slice(A),S?R.setAttribute(H,ha):f(q,ha))}}ka=b;d=(""+d).replace(lb,k);aa&&ma.length&&Va("Mismatched '<"+Q+"...>' in:\n"+d);if(h)return;$a.appendChild(Y);X=ga[X]||ga.div;e=X[0];for(la.innerHTML=X[1]+d+X[2];e--;)la=la.lastChild;$a.removeChild(Y);for(Y=M.createDocumentFragment();X=la.firstChild;)Y.appendChild(X);q.insertBefore(Y,c)}na?setTimeout(u,0):u();return na&&na.promise()}function da(r,q,c,d,e,f,g){var h,l,k,m,p,t,u;
if(d)e=Fa[d],e=e.linkCtx?e.linkCtx.tag:e,t=e.linkCtx||{data:c.data,elem:e._elCnt?e.parentElem:q,view:c,ctx:c.ctx,attr:pa,fn:e._.bnd,tag:e,_bndId:d},ya(t,t.fn);else if(r&&q)for(f=e?f:c.data,d=c.tmpl,l=K(q),r=a.trim(r).replace(ib,"\\$&"),r=r.slice(-1)!==y?T+":"+r+(l?":":"")+y:r,s.lastIndex=0;h=s.exec(r);)u=s.lastIndex,l=h[1],p=h[3],m=h[10],k=b,t={data:f,elem:q,view:c,ctx:g,attr:l,isLk:e,_initVal:!h[2]},h[6]&&(!l&&(k=/:([\w$]*)$/.exec(m))&&(k=k[1],k!==b&&(m=-k.length-1,p=p.slice(0,m-1)+y)),null===k&&
(k=b),t.convert=h[5]||""),t.expr=l+p,(h=d.links[p])||(d.links[p]=h=v.tmplFn(p,d,!0,k)),t.fn=h,l||k===b||(t.convertBack=k),ya(t,h),s.lastIndex=u}function ya(a,q){function c(b,n){G.call(a,b,n,q)}c.noArray=!0;a.isLk&&(a.view=new v.View(a.ctx,"link",ba,a.data,ba.tmpl,b,b,ja));a._ctxCb=La(a.view);a._hdlr=c;c(!0)}function Aa(a,b){var c;return a?(c=a.indexOf(b),c+1?a.slice(0,c)+a.slice(c+b.length):a):""}function O(a){return a&&(""+a===a?a:"SCRIPT"===a.tagName?a.type.slice(3):1===a.nodeType&&a.getAttribute(H)||
"")}function fa(a,b,c){function d(a,b,r,c,q,n){f.push({elCnt:e,id:c,ch:q,open:b,close:r,path:n,token:a})}var e,f=[];if(b=b?a:O(a))return f.elCnt=!a.type,e="@"===b.charAt(0)||!a.type,f._tkns=b,b.replace(c||ob,d),f}function Ba(a,b){a&&("jsv"===a.type?a.parentNode.removeChild(a):b&&""===a.getAttribute(z)&&a.removeAttribute(z))}function Ca(a,b){for(var c=a;b&&c&&1!==c.nodeType;)c=c.previousSibling;c&&(1!==c.nodeType?(c=M.createElement("SCRIPT"),c.type="jsv",a.parentNode.insertBefore(c,a)):O(c)||c.getAttribute(z)||
c.setAttribute(z,""));return c}function Ma(c,q){var n,d,e,f,g,h,k;n=q.view;var l=c.linkCtx=c.linkCtx||{tag:c,data:n.data,view:n,ctx:n.ctx};if(c.onAfterLink)c.onAfterLink(q,l);if(d=(n=c.targetTag?c.targetTag.linkedElem:c.linkedElem)&&n[0]){if(e=c._.radio)n=n.children("input[type=radio]");if(e||!c._.chging){f=v.cvt(c,c.convert)[0];if(e||d!==l.elem){for(k=n.length;k--;){d=n[k];g=d._jsvLkEl;if(c._.inline&&(!g||g!==c&&g.targetTag!==c))for(d._jsvLkEl=c,g=l.elem?l.elem._jsvBnd:c._prv._jsvBnd,d._jsvBnd=g+
"+",g=g.slice(1).split("&"),h=g.length;h--;)na(Fa[g[h]],c.convertBack);e&&(d[P]=f===d.value)}l._val=f}f!==b&&(e||d.value===b?d.contentEditable===ua&&(d.innerHTML=f):d.type===Ja?d[P]=f&&"false"!==f:n.val(f))}}if(d=d||":"===c.tagName&&l.elem)e=d._jsvTr,f=q.props.trigger,e!==f&&(d._jsvTr=f,n=n||a(d),va(n,e,"off"),va(n,f,"on"))}function qa(a){setTimeout(function(){h(a)},0)}function va(a,b,c){b&&a[c](!0===b?"keydown":b,!0===b?qa:h)}function na(a,b){var c,d,e,f,g,h=a.linkCtx,l=h.data,k=h.fn.paths;if(a&&
k){for(d=(k=(c=k._jsvto)||k[0])&&k.length;d&&""+(f=k[--d])!==f;);!f||h.tag&&!h.tag.tagCtx.args.length?a.to=[[],b]:(f=f.split("^").join("."),a.to="."===f.charAt(0)?[[g=k[d-1],f.slice(1)],b]:[h._ctxCb(e=d?k[0].split("^").join("."):f)||[l,e],b],c&&g&&(a.to[0][0]=h._ctxCb(g,l)))}}function Ka(a,b,c){var d;d=a.tagCtx.view;var e=a.tagCtxs||[a.tagCtx],f=e.length,g=!b;b=b||a._.bnd.call(d.tmpl,(a.linkCtx||d).data,d,D);if(c)e=a.tagCtxs=b,a.tagCtx=e[0];else for(;f--;)c=e[f],d=b[f],Z(c.props).setProperty(d.props),
R(c.ctx,d.ctx),c.args=d.args,g&&(c.tmpl=d.tmpl);v._ths(a,e[0]);return e}function aa(a){for(var b,c,d=[],f=b=a.length;f--;)d.push(a[f]);for(f=b;f--;)if(b=d[f],b.parentNode){if(c=b._jsvBnd)for(c=c.slice(1).split("&"),b._jsvBnd="",a=c.length;a--;)ra(c[a],b._jsvLkEl,b);e(O(b)+(b._df||""))}}function ra(c,d,e){var f,g,h,k=Fa[c];if(d)e===d.linkedElem[0]&&(delete e._jsvLkEl,delete d.linkedElem);else if(k){delete Fa[c];for(f in k.bnd)d=k.bnd[f],e=".obs"+k.cbId,a.isArray(d)?a([d]).off(F+e).off(X+e):a(d).off(X+
e),delete k.bnd[f];if(f=k.linkCtx){if(d=f.tag){if(e=d.tagCtxs)for(g=e.length;g--;)(h=e[g].map)&&h.unmap();if(g=(e=(h=d.linkedElem)&&h[0]||f.elem)&&e._jsvTr)va(h||a(e),g,"off"),e._jsvTr=b;if(d.onDispose)d.onDispose();d._elCnt||(d._prv&&d._prv.parentNode.removeChild(d._prv),d._nxt&&d._nxt.parentNode.removeChild(d._nxt))}delete f.view._.bnds[c]}delete v._cbBnds[k.cbId]}}function Q(c,d){c===b?(C&&(a(C).off($,h).off("blur","[contenteditable]",h),C=b),c=!0,ba.removeViews(),aa(M.body.getElementsByTagName("*"))):
d&&!0===c&&(d=d.jquery?d:a(d),d.each(function(){for(var a;(a=p(this,!0))&&a.parent;)a.parent.removeViews(a._.key,b,!0);aa(this.getElementsByTagName("*"));aa([this])}));return d}function la(a,b){return Q(this,a,b)}function La(a){return function(b,c){var d,e,f=[c];if(a&&b){if(b._jsvOb)return b._jsvOb.call(a.tmpl,c,a,D);if("~"===b.charAt(0)){if("~tag"===b.slice(0,4)&&(e=a.ctx,"."===b.charAt(4)&&(d=b.slice(5).split("."),e=e.tag),d))return e?[e,d.join("."),c]:[];b=b.slice(1).split(".");if(c=a.hlp(b.shift()))b.length&&
f.unshift(b.join(".")),f.unshift(c);return c?f:[]}if("#"===b.charAt(0))return"#data"===b?[]:[a,b.replace(kb,""),c]}}}function c(a){return a.type===Ja?a[P]:a.value}function g(a,b,c,d,e,g){var h,k,l,m,p,s,t=0,u=a===b;if(a){l=fa(a)||[];h=0;for(k=l.length;h<k;h++){m=l[h];s=m.id;if(s===d&&m.ch===e)if(g)k=0;else break;u||(p="_"===m.ch?Ga[s]:Fa[s].linkCtx.tag,m.open?p._prv=b:m.close&&(p._nxt=b));t+=s.length+2}t&&a.setAttribute(H,a.getAttribute(H).slice(t));a=b?b.getAttribute(H):c._df;if(k=a.indexOf("/"+
d+e)+1)a=l._tkns.slice(0,t)+a.slice(k+(g?-1:d.length+1));a&&(b?b.setAttribute(H,a):f(c,a))}else f(c,Aa(c._df,"#"+d+e)),g||b||f(c,Aa(c._df,"/"+d+e))}function e(a){var c,d,e;if(e=fa(a,!0,mb))for(a=0,c=e.length;a<c;a++)d=e[a],"_"===d.ch?(d=Ga[d.id])&&d.type&&d.parent.removeViews(d._.key,b,!0):ra(d.id)}function d(a,b,c){if("set"===c.change){a=a.tgt;for(b=a.length;b--&&a[b].key!==c.path;);-1===b?c.path&&Z(a).insert({key:c.path,prop:c.value}):c.remove?Z(a).remove(b):Z(a[b]).setProperty("prop",c.value)}}
function L(a,b,c){a=a.src;var d=c.change;"set"===d?"prop"===c.path?Z(a).setProperty(b.target.key,c.value):(Z(a).setProperty(c.oldValue,null),delete a[c.oldValue],Z(a).setProperty(c.value,b.target.prop)):"remove"===d?(b=c.items[0],Z(a).removeProperty(b.key),delete a[b.key]):"insert"===d&&(b=c.items[0],b.key&&Z(a).setProperty(b.key,b.prop))}function W(a){return 0>a.indexOf(".")}var C,p,s,T,y,u,Na,I,z,A,ea,ga,ba,Ga,M=l.document,D=a.views,v=D.sub,za=D.settings,R=v.extend,Pa=a.isFunction,Ya=D.converters,
V=D.tags,Z=a.observable,ka=Z.observe,H="data-jsv",X=v.propChng=v.propChng||"propertyChange",F=v.arrChng=v.arrChng||"arrayChange",$="change.jsv",Ra="onBeforeChange",Y="onAfterChange",N="onAfterCreate",P="checked",Ja="checkbox",Oa="radio",Ea="none",ua="true",Da='">\x3c/script>',ia='<script type="jsv',m=H+"-df",Ua="script,["+H+"]",pa="html",w={value:"val",input:"val",html:pa,text:"text"},Za={from:"value",to:"value"},k=0,fb=a.cleanData,gb=za.delimiters,Va=v.syntaxErr,hb=/<(?!script)(\w+)(?:[^>]*(on\w+)\s*=)?[^>]*>/,
ib=/['"\\]/g,$a=M.createDocumentFragment(),U=M.querySelector,Wa={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},jb={tr:"table"},Xa={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},ab={},Fa={},bb=1,kb=/^#(view\.?)?/,lb=/(^|(\/>)|<\/(\w+)>|)(\s*)([#\/]\d+[_^])`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*|(>))/g,cb=/(#)()(\d+)(_)/g,mb=/(#)()(\d+)([_^])/g,
db=/(?:(#)|(\/))(\d+)(_)/g,nb=/(#)()(\d+)(\^)/g,ob=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g,eb=l.getComputedStyle;if(!a)throw"JsViews requires jQuery";if(!D)throw"JsViews requires JsRender";if(!Z)throw"JsViews requires jquery.observable";a.link||(A={contents:function(c,d){c!==!!c&&(d=c,c=b);var e,f=a(this.nodes());f[0]&&(e=d?f.filter(d):f,f=c&&d?e.add(f.find(d)):e);return f},nodes:function(a,b,c){var d=this._elCnt,e=!b&&d,f=[];b=b||this._prv;c=c||this._nxt;for(b=e?b===this._nxt?this.parentElem.lastSibling:
b:!1===this._.inline?b||this.linkCtx.elem.firstChild:b&&b.nextSibling;b&&(!c||b!==c);)(a||d||"SCRIPT"!==b.tagName)&&f.push(b),b=b.nextSibling;return f},childTags:function(a,c){a!==!!a&&(c=a,a=b);var d=this._prv,e=[];(this.link?this:this.tagCtx.view).link(b,this.parentElem,this._elCnt?d&&d.previousSibling:d,this._nxt,b,{get:{tags:e,deep:a,name:c,id:this.link?this._.id+"_":this._tgId+"^"}});return e},refresh:function(a){var c,d=this.linkCtx,e=this.tagCtx.view;this.disposed&&I("Removed tag");a===b&&
(a=D._tag(this,e,e.tmpl,Ka(this),!0));a+""===a&&(c=this._.inline?pa:d.attr||K(this.parentElem,!0),c=B(a,d,c,this));Ma(this,this.tagCtx);return c||this},update:function(a){var c=this.linkedElem;c&&h({target:c[0]},b,a)}},v.onStore.template=function(b,c){c.link=ma;c.unlink=la;b&&(a.link[b]=function(){return ma.apply(c,arguments)},a.unlink[b]=function(){return la.apply(c,arguments)})},v.onStore.tag=function(a,b){v._lnk(b)},v._lnk=function(a){return R(a,A)},v.viewInfos=fa,(za.delimiters=function(){var a=
gb.apply(D,arguments);T=a[1];y=a[2];u=a[4];s=RegExp("(?:^|\\s*)([\\w-]*)(\\"+u+")?(\\"+T+v.rTag+"\\"+y+")","g");return this})(),R(v._lnk(v.View.prototype),{addViews:function(a,b,c){var d,e=b.length,f=this.views;if(!this._.useKey&&e&&(c=this.tmpl)&&(d=f.length+e,!1!==S(this,a,c,f,b,this.ctx)))for(a+=e;a<d;a++)Z(f[a]).setProperty("index",a);return this},removeViews:function(c,d,e){function f(c){var d,h,r,k,q,l=m[c];if(l&&l.link){c=l._.id;e||(q=l.nodes());l.removeViews(b,b,!0);l.type=b;r=l._prv;k=l._nxt;
h=l.parentElem;e||(l._elCnt&&g(r,k,h,c,"_"),a(q).remove());if(!l._elCnt)try{r.parentNode.removeChild(r),k.parentNode.removeChild(k)}catch(p){}t(l);for(d in l._.bnds)ra(d);delete Ga[c]}}var h,k,l=!this._.useKey,m=this.views;l&&(k=m.length);if(c===b)if(l){for(h=k;h--;)f(h);this.views=[]}else{for(h in m)f(h);this.views={}}else if(d===b&&(l?d=1:(f(c),delete m[c])),l&&d){for(h=c+d;h-- >c;)f(h);m.splice(c,d);if(k=m.length)for(;c<k;)Z(m[c]).setProperty("index",c++)}return this},refresh:function(a){var b=
this.parent;b&&(S(this,this.index,this.tmpl,b.views,this.data,a,!0),t(this));return this},link:Qa}),Ga={0:ba=new v.View},Ya.merge=function(a){var b,c=this.linkCtx._val||"",d=this.tagCtx.props.toggle;d&&(b=d.replace(/[\\^$.|?*+()[{]/g,"\\$&"),c=c.replace(RegExp("(\\s(?="+b+"$)|(\\s)|^)("+b+"(\\s|$))"),"$2"),a=c+(a?(c&&" ")+d:""));return a},V("on",{attr:Ea,onAfterLink:function(c,d){for(var e,f,g=0,h=c.args,k=h.length,l=c.props.data,m=c.view,p=c.props.context;g<k&&!(f=Pa(e=h[g++])););if(f){f=h.slice(g);
h=h.slice(0,g-1);p||(p=(p=/^(.*)[\.^][\w$]+$/.exec(c.params.args.slice(-f.length-1)[0]))&&v.tmplFn("{:"+p[1]+"}",m.tmpl,!0)(d.data,m));if(this._evs)this.onDispose();a(d.elem).on(this._evs=h[0]||"click",this._sel=h[1],l==b?null:l,this._hlr=function(a){return e.apply(p||d.data,[].concat(f,a,{change:a.type,view:m,linkCtx:d}))})}},onDispose:function(){a(this.parentElem).off(this._evs,this._sel,this._hlr)},flow:!0}),R(V["for"],{onArrayChange:function(a,b){var c,d=b.change;if(this.tagCtxs[1]&&("insert"===
d&&a.target.length===b.items.length||"remove"===d&&!a.target.length||"refresh"===d&&!b.oldItems.length!==!a.target.length))this.refresh();else for(c in this._.arrVws)c=this._.arrVws[c],c.data===a.target&&c._.onArrayChange.apply(c,arguments);a.done=!0},onAfterLink:function(){var b,c,d,e,f=this,g=f._ars||{},h=f.tagCtxs,k=h.length,l=f.selected||0;for(b=0;b<=l;b++)c=h[b],e=c.map?c.map.tgt:c.args.length?c.args[0]:c.view.data,(d=g[b])&&e!==d[0]&&(ka(d[0],d[1],!0),delete g[b]),!g[b]&&a.isArray(e)&&(ka(e,
c=function(a,b){f.onArrayChange(a,b)}),g[b]=[e,c]);for(b=l+1;b<k;b++)if(d=g[b])ka(d[0],d[1],!0),delete g[b];f._ars=g},onDispose:function(){for(var a in this._ars)ka(this._ars[a][0],this._ars[a][1],!0)}}),R(V["for"],A),R(V["if"],A),R(V.include,A),V("props",{baseTag:V["for"],dataMap:D.map({getTgt:V.props.dataMap.getTgt,obsSrc:d,obsTgt:L,tgtFlt:W})}),R(a,{view:D.view=p=function(c,d,e){function f(a,b){if(a)for(h=fa(a,b,cb),k=0,l=h.length;k<l&&(!(g=Ga[h[k].id])||!(g=g&&e?g.get(!0,e):g));k++);}d!==!!d&&
(e=d,d=b);var g,h,k,l,m;m=0;var p=M.body;if(c&&c!==p&&1<ba._.useKey&&(c=""+c===c?a(c)[0]:c.jquery?c[0]:c)){if(d){f(c._df,!0);if(!g)for(m=U?c.querySelectorAll(Ua):a(Ua,c).get(),d=m.length,c=0;!g&&c<d;c++)f(m[c]);return g}for(;c;){if(h=fa(c,b,db))for(d=h.length;d--;)if(g=h[d],g.open){if(1>m)return(g=Ga[g.id])&&e?g.get(e):g||ba;m--}else m++;c=c.previousSibling||c.parentNode}}return ba},link:D.link=oa,unlink:D.unlink=Q,cleanData:function(b){b.length&&k&&aa(b);fb.apply(a,arguments)}}),D.utility={validate:function(a){try{ba.link(b,
M.createElement("div"),b,b,a,b,b,1)}catch(c){return c.message}}},R(a.fn,{link:function(a,b,c,d,e,f,g){return oa(a,this,b,c,d,e,f,g)},unlink:function(a){return Q(a,this)},view:function(a){return p(this[0],a)}}),a.each([pa,"replaceWith","empty","remove"],function(b,c){var d=a.fn[c];a.fn[c]=function(){var a;k=1;try{a=d.apply(this,arguments)}finally{k=0}return a}}),R(ba,{tmpl:{links:{},tags:{}}}),ba._.onRender=ja,za({wrapMap:ga={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>",
"</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],svg_ns:[1,"<svg>","</svg>"],div:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},linkAttr:z="data-link",merge:{input:{from:c,to:"value"},textarea:Za,select:Za,optgroup:{to:"label"}},jsrDbgMode:za.debugMode,debugMode:function(a){za.jsrDbgMode(a);
a?l._jsv={views:Ga,bindings:Fa}:delete l._jsv},jsv:function(){za.debugMode(za._dbgMode);z=za.linkAttr;I=D._err;ea=Ua+",["+z+"]";Na=za.noDomLevel0;ga.optgroup=ga.option;ga.tbody=ga.tfoot=ga.colgroup=ga.caption=ga.thead;ga.th=ga.td}}))})(this,this.jQuery)}())},{}]},{},[1])(1)});
